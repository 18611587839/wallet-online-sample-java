   <div id="header2" class="ui-header ui-bar-y">
      <div class="sale-header">Complete your purchase</div>
    </div>
    <div id="order-content">
      <p class="content-indent">Shopping Cart</p>
      <table class="content-indent fill-100 small-font"><tbody>
      <tr>
        <td class="fill-30">
          <img class="fill-100" id="camera_img" src="$itemImage">
        </td>
        <td class="fill-40">
          <label class="content-indent">Quantity $itemQuantity</label>
          <br><br>
          <span class="content-indent">$itemName</span>
        </td>
        <td class="text-right">
          <span class="drop-padding-match"><br><br>$$itemPrice</span>
        </td>
      </tr></tbody>
      </table>
      <div class="padding-10">
        <label class="border-1px" id="remove">Remove</label>
      </div>
      <hr>
      <table class="fill-100 small-font">
      <tbody>
        <tr>
          <td class="padding-30">Estimated Shipping</td>
          <td class="text-right content-indent">$9.99</td>
        </tr>
        <tr>
          <td class="padding-30">Tax (CA)</td>
          <td class="text-right content-indent">$8.00</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td class="text-right content-indent total-padding-top"><b>Total</b></td>
          <td class="text-right content-indent total-padding-top"><b><div id="total">$$totalPrice</div></b></td>
        </tr>
        </tbody>
      </table>
    </div>
    <hr />
    <div class="wallet-button-container">
      <div id="buybutton">
        <div id="gWalletDiv">
          <g:wallet jwt=$mwr success="successMaskedWallet"
            failure="failureMaskedWallet"></g:wallet>
        </div>
      </div>
      <div class="order-detail-buttons">
        <div id="continue-checkout" class="ui-btn ui-shadow ui-mini ui-btn-hover-a ui-btn-down-a" aria-disabled="false">
          <span class="ui-btn-inner"><span class="ui-btn-text">Continue Checkout</span></span>
        </div>
        <div class="ui-btn ui-shadow ui-mini ui-btn-up-c" aria-disabled="false">
          <span class="ui-btn-inner"><span class="ui-btn-text">Continue Shopping</span></span>
        </div>
      </div>
    </div>
    <pre id="masked-request-jwt" class="jwtContent">$outputString</pre>
    <!-- Form used to finish the purchase flow by posting makedWallet Response to the server -->
    <form id="purchaseDetailsForm" name="purchaseDetailsForm"
      action="/confirm" method="post">
      <input type="hidden" name="maskedWallet" id="maskedWallet">
      <input type="hidden" name="changeJwt" id="changeJwt">
      <input type="hidden" name="itemId" id="itemId" value="$itemId">
      <input type="hidden" name="quantity" id="quantity" value="$itemQuantity">
    </form>
  </div>
  <script type="text/javascript">

    /**
     * Continue Checkout button logic. Request Masked Wallet should be tied to
     * your continue checkout button. This allows you to get the
     * maskedWalletRequest for pre-authorized users with out any user interaction.
     *
     * @param {String}
     *  oauthToken accessToken of preauthorized users
     */
    function requestMaskedWallet() {
      if (!window.Xyz.Wallet.accessToken){
        window.alert("Merchant's payment-card entry screen goes here.");
        return;
      }
      jQuery("#pageLoadingSpinner").show();
      google.wallet.online.requestMaskedWallet({
        jwt : "$mwr",
        success : successMaskedWallet,
        failure : failureMaskedWallet,
        token : window.Xyz.Wallet.accessToken
      });
    };

    /**
     * Masked Wallet success handler. This function handles masked wallet jwt and POST's the
     * information to the server.
     *
     * @param {Object}
     *          param The Masked Wallet Response object
     */
    function successMaskedWallet(param) {
      jQuery("#maskedWallet").val(param.jwt);
      jQuery("#changeJwt").val("$mwr");
      document.forms["purchaseDetailsForm"].submit();
    };

    /**
     * Masked Wallet Request failure handler. You should implement your
     * error handling code here.
     *
     * @param {Object}
     *          param Defines the code and details of why the request failed
     */
    function failureMaskedWallet(param) {
      jQuery("#pageLoadingSpinner").hide();
      alert("error: " + param.error + ", details: " + param.details);
      console.log("masked wallet failure callback called" + param.error + ", details: "
        + param.details);
    };

    /**
     * Check if Wallet is a preauthed method of payment. If Wallet is preauthed
     * store the access token associated for future use.
     */
    function init() {
      window.Xyz.Wallet.checkAuth();

      // Attaches click handlers to show spinner for the Wallet Button
      document.getElementById("gWalletDiv").addEventListener("click",
          function() {
            jQuery("#pageLoadingSpinner").show();
          });
      document.getElementById("continue-checkout").addEventListener("click",requestMaskedWallet);
    };
    // Initiate the authorization process and add click handlers whenever the page is loaded.
    window.onload = init;
  </script>
